2002-08-04  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-info.c (yelp_info_read_info_dir): 
	- support info files that is named name.gz. Fixes #85324.
	- Remove duplicates.

	* src/yelp-window.c:
	(window_init): don't automatically go to uri "toc:" in history. 
	(yelp_window_new): don't open "toc:", this is now done from
	  yelp_base_new_window 
	(yelp_window_open_uri): goto the uri in history, Fixes #86538.

	* src/yelp-base.c:
	(impl_Yelp_newWindow): don't show window and open_uri here. Do it in
	  yelp_base_new_window instead.
	(yelp_base_new_window): added a uri argument. If it's passed it's
	  opened, otherwise "toc:" is opened.

2002-08-04  Yogeesh MB <yogeeshappa.mathighatta@wipro.com> 

	* src/yelp-man.c: added function which removes multiple 
 	man pathes, fixes bug#75728
 
2002-08-02  Sander Vesik <sander.vesik@sun.com>
	* stylesheets/yelp-customization.xsl:
	- make list items have some space around them
	- make sublists have more consistent spacing
	- change list styles inside sublists

2002-08-01  Szabolcs Ban  <shooby@gnome.hu>

	* configure.in: Added "hu" to ALL_LINGUAS. Finally :)

2002-07-15  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-view-toc.c (toc_start): Print with %% instead of % to
	  printf, I'm stupid :) Fixes 87972, thanks
	  mathew@fugue.jpl.nasa.gov for finding this.

2002-07-11  Brian Cameron  <Brian.Cameron@sun.com>

	* yelp/configure.in
	* yelp/src/Makefile.am
	* yelp/src/yelp-reader.c
	Now support libgnome installing gnome2-man2html and gnome2-info2html
	to libexec.

2002-07-09  Mark McLoughlin  <mark@skynet.ie>

	* yelp.desktop.in: use X-GNOME-DocPath instead of DocPath.

2002-07-08  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-info.c:
	(yelp_info_read_info_dir): Removed possibility of buffer overflow
	  by using g_strdup_printf instead of strcpy. Fixes #87127. Thanks
	  to Laavanya K R for finding and proposing a solution.

2002-07-07  Glynn Foster  <glynn.foster@sun.com>

	* yelp.desktop.in (X-GNOME-DocPath): 

2002-07-06  Sander Vesik <sander.vesik@sun.com>
	* stylesheets/yelp-customization.xsl
	- make <part> and <chapter> have plain unstyled toc-s
	  until yelp.render.toc is sufficently advanced
	- correctly pass in a string parameter when matching /book
	- call correct titlepage template for <book>

2002-07-05  Sander Vesik <sander.vesik@sun.com>
	* stylesheets/yelp-customization.xsl
	- make <book> support somewhat work

2002-07-05  Sander Vesik <sander.vesik@sun.com>
	* stylesheets/yelp-customization.xsl
	- rationalize heading styles
	- don't center title
	- tweak list indenting

2002-06-28  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-info.c (yelp_info_init): sort info pages.

2002-06-27  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-window.c: added patch from Kang Jeong-Hee to support
	  toolbar style "both_horiz". Fixes #85529

	* src/yelp-view-toc.c (toc_page_end): 
	- don't scale the gnome-button.
	- mark some strings for translation. Fixes #84020

2002-06-26  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-window.c:
	- Fixes #84713
	(yelp_window_new): set icon on window.
	(window_load_icon): added, loads the gnome-help.png icon.
	(window_about_cb): set the icon in the about box.

	* README: removed old information

	* src/yelp-main.c: follow yelp style.

2002-06-19  Mikael Hallendal  <micke@codefactory.se>

	* Release 1.0.1

	* NEWS: updated for 1.0.1

	* configure.in: updated to 1.0.1

2002-06-10  Mikael Hallendal  <micke@codefactory.se>

	* Release 1.0

	* configure.in: updated to 1.0

2002-06-03  Mikael Hallendal  <micke@codefactory.se>

	* Release 0.10

	* NEWS: updated for 0.10

	* configure.in: 0.10

	* configure.in: bumped gtkhtml2 deps.

	* src/yelp-window.c (window_handle_uri): 
	- let the index view handle it's own uri's

	* src/yelp-view-content.c (content_reader_finished_cb): 
	- fixed a possible crash

	* src/yelp-view-index.c:
	- updated to the YelpReader stuff.
	- reenable showing docs in the html view here instead of content
	  view.

	* src/yelp-uri.c: 
	(yelp_uri_to_index): added, special treatment of index URI's.
	(yelp_uri_from_index): same.
	(yelp_uri_exists): handle index uri's correctly.

	* src/yelp-db2html.c (main): load the DTD so that enteties works.

	* src/yelp-view-content.c: 
	(content_find_path_from_uri): added, used to find the path to a
	  certain URI.
	(content_tree_model_foreach): added, used by above function.
	(content_reader_finished_cb): expand tree and select the correct
	  node. Fixes #80518

	* src/yelp-reader.h: finish signal includes the URI which finished
	  loading.

	* src/yelp-db2html.c: send path to the docbook stylesheets as a
          parameter. Still doesn't seem to fix the path problem with the
	  images.

2002-06-02  Mikael Hallendal  <micke@codefactory.se>

	* Fixes #69047

	* src/yelp-window.c (yelp_window_new): connect to title_changed
	  signal on content and TOC views.
	(window_title_changed_cb): set the new title.

	* src/yelp-view-toc.c: added title_changed signal. I soooo want
	  the views to inherit from the same base :) Will fix after 2.0.0
	(toc_html_title_changed_cb): emit title changed signal.
	(toc_page_start): take extra argument so that you can set title
	  and page header.

	* src/yelp-view-content.c: added signal title_changed. 
	(content_html_title_changed_cb): emit title changed signal.

	* src/yelp-html-gtkhtml2.c:
	(html_title_changed_cb): emit title changed signal.

	* src/yelp-html.h: added title_changed signal.

	* src/yelp-html-gtkhtml1.c: 
	- started on emit title changed	code. WIP.

	* src/yelp-uri.c:
	(uri_get_doc_type): set info:dir to be toc:info
	(uri_get_doc_path): same

	* src/yelp-db2html.c (main): use the shipped catalog file.

2002-06-01  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-uri.c (uri_get_path_from_relative): if URI can't get
	  resolved, set path to in-string.

	* src/yelp-window.c (window_handle_uri): show error dialog if URI
	  doesn't exist.
	(yelp_window_open_uri): don't return if URI doesn't exist.

	* src/yelp-uri.c: 
	- Added a type YELP_URI_TYPE_GHELP_OTHER so that I can recreate a
	  URI for error messaging.
	(yelp_uri_exists): do a check rather then just a look at the type.
	(uri_get_doc_type): don't check if URI exists here.
	(yelp_uri_to_string): handle GHELP_OTHER.

	* src/yelp-reader.c (reader_start): return if URI doesn't exists,
	  shouldn't happen.

	* src/yelp-uri.h: removed YELP_URI_TYPE_NON_EXIST, use
	  yelp_uri_exists.

	* stylesheets/docbook/Makefile.am: Install the images

	* stylesheets/docbook/images/*: Added some of the images from XSL
	  stylesheets. 

	* Fixes #83156

	* src/yelp-index-model.c:
	(yim_finalize): free the index list.
	(yelp_index_model_set_words): copy the list and don't sort.

	* src/yelp-base.c (yelp_base_new): sort the index list here.

	* src/yelp-view-toc.c (toc_page_start): removed all of the CSS
	  used to get it to not render huge fonts, now handled by
	  Gtkhtml2.

	* stylesheets/yelp-customization.xsl: 
	- don't hard code font size to 10pt. Use the font set by Gtkhtml2
	  (which is taken from the theme)

	* src/yelp-db2html.c (main): don't load the DTD from the net.

	* src/yelp-reader.c (reader_file_start): Fixed #83668

2002-06-01  James Henstridge  <james@daa.com.au>

	* src/yelp-db2html.c (main): perform XInclude processing on
	  Docbook/XML documents we load.

2002-06-01  Jesus Bravo Alvarez  <jba@pobox.com>

	* configure.in: Added "gl" (Galician) to ALL_LINGUAS

2002-05-29  Radek Doulik  <rodo@ximian.com>

	* src/yelp-html-gtkhtml1.c: 
	- removed #include "yelp-db2html.h"
	(html_url_requested_cb): close gtkhtml stream

2002-05-31  Mikael Hallendal  <micke@codefactory.se>

	* configure.in (yelp): define yelplocaledir, Fixes #83639

	* src/Makefile.am (INCLUDES): use yelplocaledir

2002-05-31  Ross Burton  <ross@burtonini.com>

	* src/yelp-window.c (window_about_cb): Tell the about dialog who
	  its parent is, so that it appears at the right location.

2002-05-31  Yogeesh MB <yogeeshappa.mathighatta@wipro.com> 

	* src/yelp-main.c: fixes save session bug, #82605 

2002-05-31  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-reader.c (reader_get_chunk):
	- return the full document if finding the chunk comments
	  fail. This is better than just returning NULL. Also silence the
	  warnings for now.

	* Release 0.9.1

	* configure.in: bumped version to 0.9.1

	* NEWS: updated for 0.9.1

	* stylesheets/docbook/*: 
	- Added the 1.48 stylesheets until the stylesheet issues have been 
	  sorted out. Norm has said that in the 1.50+ the changes between
	  the different versions will not cause breakage and we can then
	  use current instead of a certain version of these. Lots of
	  distributions don't ship 1.48 and this will cause lots of
	  troubles for the users.

	* stylesheets/yelp-customization.xsl: use a relative link to
	  reference to the stylesheets.

	* stylesheets/Makefile.am (SUBDIRS): added docbook

	* configure.in: output stylesheet/docbook/Makefile

2002-05-27  Mikael Hallendal  <micke@codefactory.se> 

	* Release 0.9

	* src/Makefile.am: build fix for marshallers.

	* NEWS: updated for 0.9

	* configure.in: 
	- Bumped version to 0.9
	- Updated libgnome deps to 1.117.2
	- Updated gtkhtml2 deps to 1.99.8

	* src/yelp-reader.c: 
	- removed old code.
	- fixed a couple of warnings

	* stylesheets/yelp-customization.xsl: don't include section names
	  on toc and title-page.

	* src/yelp-view-content.c (yelp_view_content_show_uri): 
	- don't set "Loading..." if the doc is cached. It will only result
	  in flicker.

	* src/yelp-reader.c:
	(reader_man_info_start):
	- make sure that section is not an empty string.
	(yelp_reader_start): 
	- make sure that section is not an empty string.
	- return a boolean to say if the document was cached or not.
	
	* src/yelp-reader.c:
	(reader_get_chunk): added, used to get a chunk from a multi
	  chunked document.
	(reader_man_info_start): 
	- now handles docbook too. will be renamed later.
	- add docbook results in cache.
	- get chunk from document if docbook.
	(yelp_reader_start): 
	- check in cache if document is there, if so, just get the chunk 
	  and signal. 
	- if not in cache, use g_timeout_add instead of idle.

	* src/yelp-db2html.c: 
	- this is now it's own binary
	- use multichunk
	- don't use YelpURI so that we don't need to init gnome vfs

	* src/yelp-db2html.h: removed
	
	* src/yelp-cache.c: first dummy implementation of cache.

	* src/yelp-base.c (yelp_base_init): init the cache.

	* src/Makefile.am:
	(yelp_db2html_LDADD): added binary for db2html.
	(yelp_SOURCES): added yelp-cache.[ch] and removed 
	  yelp-db2html.[ch]

2002-05-26  Mikael Hallendal  <micke@codefactory.se>

	* stylesheets/yelp-customization.xsl: 
	- Don't include section name in end comment.
	- put [] around the section name in start tag.
	
2002-05-26  Alessio Frusciante  <algol@firenze.linux.it>

	* configure.in: added "it" to ALL_LINGUAS

2002-05-23  Jacob Berkman  <jacob@ximian.com>

	* src/Makefile.am (yelp-marshal-main.c): add explicit dependency
	on yelp-marshal.c to make automake work

2002-05-23  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-view-content.c:
	(yelp_view_content_new): shrink TOC-tree width

	* src/yelp-html-gtkhtml1.c (html_link_clicked_cb): 
	- don't shortcut info

2002-05-22  Sander Vesik <sander.vesik@sun.com>

	* stylesheets/yelp/customization.xsl:
	- fix whitespace around 'About This Document'
	- whitespace reduction for headers
	- try to fix table of contents links not showing up for Hallski
	- the 'previous' link on a first sect2 of a sect1 
	- work on indirect previous links
	- display the document title as a H1 on the TOC page instead of
	  having it in the navbar

2002-05-23  Mikael Hallendal  <micke@codefactory.se>

	* src/Makefile.am (yelp_SOURCES): use yelp-marshal-main.c instead
	  of yelp-marshal.c and yelp-marshal.h

	* src/yelp-marshal-main.c: added to get rid of warnings in
	  yelp-marshal.c

2002-05-22  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-db2html.c (yelp_db2html_convert): 
	- use the new stylesheet parameter gdb_stylesheet_path.

	* src/yelp-reader.c (reader_man_info_start): support chunked info.

	* src/yelp-html-gtkhtml2.c
	(html_link_clicked_cb): don't shortcut if info. it's now chunked.

	* src/yelp-reader.c: use yelp-db2html again.

	* src/yelp-db2html.c: use #define for stylesheet location instead
	  of creating a string with it.

	* src/Makefile.am (yelp_SOURCES): don't include yelp-db2html.

	* src/yelp-reader.c (reader_db_start): 
	- try to do the docbook-stuff here instead.

	* src/yelp-view-toc.c (toc_page_end): updated footer some.

2002-05-22  Richard Hult  <rhult@codefactory.se>

	* src/yelp-view-toc.c:
	(toc_man_emit): free return from yelp_uri_to_string.

	* src/yelp-util.c (yelp_util_compose_path_url): free path

	* src/yelp-man.c (yelp_man_init): free manpathes

2002-05-22  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-db2html.c: 
	- cleaning up
	- made to use YelpURI instead of copying parts from it
	- plugged leaks.

	* src/test-reader.c (main): create reader without an argument.
	* src/yelp-view-content.c (content_init): same

	* src/yelp-reader.c: always be async, don't be optional.

	* src/yelp-view-toc.c (toc_page_end): added a space, thanks rhult.

	* src/yelp-window.c (window_about_cb): 
	- fixed copyright notice in about dialog. Thanks menthos.

	* src/test-reader.c:
	(main): call yelp_reader_new with TRUE for async.
	(data_cb): swapped buffer and len arguments.

2002-05-21  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-reader.c:
	(reader_db_write): don't return -1
	(reader_db_close): same.

	* Release 0.8

	* NEWS: updated for 0.8

	* configure.in: bumped version to 0.8

	* src/yelp-reader.c: fixed compile warning.

	* src/yelp-uri.c: fixed so that external links are working too.

	* src/yelp-view-toc.c: implemented jimmac's mockups.

	* src/yelp-uri.c: added support for file:

	* src/Makefile.am (INCLUDES): added IMAGEDIR

	* data/images/*: new files

	* data/Makefile.am: new file

	* configure.in: 
	- added data/Makefile, data/images/Makefile to AC_OUTPUT.

	* Makefile.am (SUBDIRS): added data

2002-05-20  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-view-content.c: 
	- use YelpURI instead of docpath for current_uri. 
	(yelp_view_content_show_uri): 
	- Fixed a problem that if you viewed a man page and then switched
 	  to a docbook with TOC you didn't get the TOC.
	- Change cursor here.
	- Write out "Loading..." to the html-view instead of showing old
	  data while reading.
	(content_reader_data_cb): clear the "Loading..."-message first
	  time this is called.
	(content_reader_finished_cb): 
	- Fixes #82363
	- Give focus to html widget.

	* src/yelp-man.c (yelp_man_populate_tree_for_subdir): 
	- Set the link to be page.secnum instead of page.section.
	  For example pages with foo.3pm should have the link foo.3, this
	  solves the problem where you get the error that page is not
	  found. Might fix #82346.

2002-05-20  Sander Vesik <sander.vesik@sun.com>

	* stylesheets/yelp-customization.xsl:
	- render formal tables just like informal tables
	- always leave some space between the bottom navbar and the text
	- make notes and other admonitions to be unindented
	- add whitespace for tables appearing within lists
	- improve looks of complex tables

2002-05-20  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-reader.c: be ASYNC! :) and handle cancels. Starting to
	  be nice now.

	* src/yelp-marshal.list: VOID:INT,STRING -> VOID:STRING,INT

	* src/yelp-reader.c (yelp_reader_start): renamed from reader_read.

2002-05-20  Sander Vesik <sander.vesik@sun.com

	* stylesheets/yelp-custom.xsl, stylesheets/yelp-customization.xsl:
	  introduce a new parameter and use it so images distributed
	  with the stylesheet get picked up correctly

2002-05-18  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-info.c (yelp_info_init): 
	- Fixes #80981 (hopefully)
	- Thanks to Stéphane Démurget for notifying where the error was.

	* src/yelp-view-toc.c (toc_info): fixed mem leak.

	* configure.in (YELP_IDL_INCLUDES): readded bzip2 check, doh!

	* src/yelp-view-toc.c: 
	(toc_start): fixed mem leak
	(toc_scrollkeeper): fixed mem leak

	* src/yelp-view-toc.h: don't include gtkhtml2 headers.

	* src/yelp-view-toc.c: 
	- include libxml/parser.h now that we don't include gtkhtml2
	  headers here any more.

	* src/yelp-html-gtkhtml1: 
	- Added
	- Makes yelp use GtkHTML1 for HTML rendering instead of GtkHTML2.
	
	* src/yelp-html-gtkhtml2: Renamed from yelp-html.c

	* src/yelp-html.c: Moved to yelp-html-gtkhtml2.c

	* src/Makefile.am (html_widget_impl): check for the correct
	  html-widget implementation.

	* configure.in: 
	- added --with-html-widget switch which controls if GtkHTML1 or
	  GtkHTML2 should be used. Default is GtkHTML2
	- Check for gtkhtml1 libraries and headers if that library should
	  be used.
	- Removed bzip2-check, left over from when I tried to merge
	  man2html into yelp.

2002-05-18  Richard Hult  <rhult@codefactory.se>

	* src/yelp-window.c: Use stock item for about menu item. 

2002-05-18  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-window.c: 
	- don't handle YelpViewTOC as a html view any more. 
	- use yelp_view_toc_get_widget when you need the widget.

	* src/yelp-view-toc.c: 
	- don't inherit HtmlView, instead be a GObject (make all the views
	  a common base class).
	- Removed html view stuff and use YelpHtml instead.
	(toc_link_clicked_cb): removed
	(toc_open): removed, use yelp_html_clear
	(toc_close): removed, use yelp_html_close
	(toc_write): removed, use yelp_html_write
	(toc_printf): removed, use yelp_html_printf
	(yelp_view_toc_open_uri): don't try to set adjustment, not a html
	  view any more
	(toc_uri_selected_cb): added, signal from YelpHtml, just proxy.

	* src/yelp-html.c 
	(yelp_html_new): 
	- Just set the view to be white
	- Use the yelp_html_* functions instead of html_* directly.
	(yelp_html_write): 
	- Swapped len and data arguments.
	- If len = -1, assume NULL terminated string and use strlen.
	(yelp_html_printf): added from yelp-view-toc.

	* src/yelp-view-toc.c: conform with style.
	* src/yelp-window.c: same.
	* src/yelp-history.c: same.
	* src/yelp-scrollkeeper.c: same.

	* src/yelp-view-index.c (yelp_view_index_show_uri): 
	- commented out call to yelp_html_open_uri since it's been
	  removed.

	* src/yelp-view-content.c: 
	- changed name on internal functions to conform with style.
	- moved functions from yelp-html.c
	- use the YelpReader to read the data instead of letting YelpHtml
	  handle it.
	(yelp_view_content_stop): removed.

	* src/yelp-html.c: 
	(html_reader_start_cb): moved to yelp-view-content.c
	(html_reader_data_cb): same
	(html_reader_finished_cb): same
	(html_reader_error_cb): same
	(yelp_html_clear): added/impl.
	(yelp_html_write): added/impl.
	(yelp_html_close): added/impl.
	(yelp_html_cancel_loading): removed
	(yelp_html_open_uri): removed
	(yelp_html_set_base_uri): added/impl.

	* src/yelp-reader.c:
	(reader_man_info_start): emit "start"-signal.
	(reader_io_watch_cb): do the right thing (hopefully) :)

	* src/yelp-html.c: 
	(html_do_write): removed
	(html_do_close): removed
	(html_do_docbook): removed
	(html_io_watch_cb): removed
	(html_reader_start_cb): added/implemented, temporary
	(html_reader_data_cb): added/implemented, temporary
	(html_reader_finished_cb): added/implemented, temporary
	(html_reader_error_cb): added/implemented, temporary
	(html_do_maninfo): removed
	(html_do_html): removed
	(html_init): connect to reader signals.
	(yelp_html_open_uri): removed lots of code and use YelpReader
	  instead. This should be removed entirely later on.

	* src/yelp-html.c: 
	- renamed static functions to correspond to style.

	* src/yelp-reader.h: 
	- removed YelpReaderStatus.

	* src/yelp-reader.c: 
	- Now handles docbook, man, info, plain files, and external URI's.
	(reader_class_init): 
	- added signals "start", "data", "finished" and "error".
	(reader_db_start): added/impl.
	(reader_db_write): added/impl.
	(reader_db_close): added/impl.
	(reader_man_info_start): added/impl.
	(reader_io_watch_cb): added/impl.
	(reader_file_start): added/impl.
	(yelp_reader_read): take reader as argument and implemented.

	* src/yelp-marshal.list: added marshal needed by YelpReader.

	* src/yelp-html.c (yelp_html_do_docbook): 
	- take URI instead of text doc path and section.

	* src/yelp-db2html.c (yelp_db2html_convert): 
	- take a URI instead of text doc path and section.
	- don't close OutputBuffer here.

	* src/test-reader.c:
	(start_cb): added
	(data_cb): added
	(finished_cb): added
	(main): start using the yelp-reader for testing.

	* src/Makefile.am (test_reader_SOURCES): 
	- added files needed for this test program.

2002-05-08  Mikael Hallendal  <micke@codefactory.se>

	* src/test-reader.c: added, test file for the YelpReader.

	* src/Makefile.am (yelp_SOURCES): 
	(test_reader_SOURCES): added test-reader
	- added yelp-reader.[ch]

	* src/yelp-uri.[ch]: 
	- removed the YelpReader-stuff from here.

	* src/yelp-reader.[ch]: 
	- starting on this class that will take care of reading any given
	  YelpURI *uri and signalling when there is something to read.

2002-05-07  Christophe Merlet  <christophe@merlet.net>

	* src/Makefile.am: Really add ??!! $(DESTDIR) variable.

2002-05-07  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-section.c:
	(yelp_section_new): check if name == NULL, hopefully fixes #80981.

	* src/yelp-scrollkeeper.c:
	(ys_parse_index_item): reverted my own stupidity.

2002-05-06  Sander Vesik  <sander.vesik@sun.com>

	* stylesheet/yelp-customization.xsl: 
	- initial support for <part>
	- fix informaltable display
	- fix revhistory display
	- fix non-centering of 'Contents' in the footer navbar
	- fix display of copyright holders on title page
	- improvements to the Table of Contents page

2002-05-06  Mikael Hallendal  <micke@codefactory.se>

	* NEWS: fixup

	* configure.in (GNOMELOCALEDIR): updated libgtkhtml2 deps.

	* Release 0.7
	
	* NEWS: updated for 0.7

	* configure.in: bumped version to 0.7

	* src/yelp-scrollkeeper.c:
	- Fixes #80800
	(ys_parse_index): silenced warning.

	* src/yelp-window.c: 
	- use YelpURI.
	(yw_handle_uri): somewhat cleaned up after YelpURI.

	* src/yelp-view-toc.c: 
	- use YelpURI.
	- Changed url_selected signal to uri_selected.
	- Send the links as man:... instead of path:..

	* src/yelp-view-index.c: 
	- use YelpURI.
	- Changed url_selected signal to uri_selected.
	- thinking about removing the html-view from this and only have it
	  as a entry + list for now. Later on we can add full text search
	  or more sofisticated searching.

	* src/yelp-view-content.c: 
	- use YelpURI.
	- Changed url_selected signal to uri_selected.
	(yelp_view_content_show_uri): 
	- cleaned up A LOT since this became much much easier with
	  YelpURI.

	* src/yelp-util.c (yelp_util_is_url_relative): 
	- made external and changed name from is_uri_relative.
	(yelp_util_resolve_relative_url): 
	- chagned name from yelp_util_resolve_relative_url.
	(tree_find_node_uri): use YelpURI.
	(yelp_util_find_node_from_uri): same.

	* src/yelp-uri.c:
	- Thinking of making the YelpURIType a bit mask so that I can add
	  yelp_uri_is_type (YELP_URI_TYPE_MAN | YELP_URI_TYPE_INF) since 
	  that kind of usage is all over.
	- Support index: and path: (not sure if we need path:)
	(yelp_uri_copy): added/impl
	(yelp_uri_get_relative): added/impl
	(yelp_uri_equal): added/impl.
	(yelp_uri_equal_path): added/impl.
	(yelp_uri_equal_section): added/impl.
	(yelp_uri_to_string): added/impl.

	* src/yelp-section.c: 
	- use YelpURI.
	- Removed reference, scheme.

	* src/yelp-scrollkeeper.c: 
	- use YelpURI.
	- Don't create specific index:-uri's
	(ys_parse_index_item): this was actually broken and only inputed
	  the last indexitem in the index-file. fixed.

	* src/yelp-marshal.list (VOID:POINTER,BOOLEAN): 
	- replaced VOID:STRING,STRING,BOOLEAN (the old
 	  url_selected-marshal).

	* src/yelp-man.c: 
	- use YelpURI
	- Don't create specific index:-uri's
	(yelp_info_init): don't translate string 'man' which we are
	  trying to find with strcmp in yelp-view-toc.

	* src/yelp-info.c: 
	- use YelpURI
	- Don't create specific index:-uri's
	(yelp_info_init): don't translate string 'info' which we are
	trying to find with strcmp in yelp-view-toc.

	* src/yelp-html.c: 
	- Updated to use YelpURI.
	- changed signal from url_selected to uri_selected (emits YelpURI
	  instead of base_uri + rel_uri).
	(yelp_html_do_maninfo): take a YelpURI instead of text uri + doc
	  type.
	(yelp_html_open_uri):
	- take YelpURI instead of text uri.
	- this should later be moved into yelp_uri_{read,read_async}.

	* src/yelp-history.c: Updated to use YelpURI.

	* src/yelp-base.c (impl_Yelp_getWindows): use YelpURI.

	* src/test-uri.c: test yelp_uri_to_string.

2002-05-06  Sander Vesik <sander.vesik@sun.com>

        * stylesheets/yelp-customization.xsl: Initial multichunking code

2002-05-05  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-uri.c (uri_get_doc_type): 
	- Also handle toc:-uri's
	(yelp_uri_exists): return correct answer :)

	- Now implements jrb's ghelp-uri scheme.
	- added doc_path-argument so that it doesn't have to be calculated
	  twice when creating a YelpURI.
	(uri_get_path_from_relative): added/impl.
	(uri_locate_help_file): added/impl.
	(uri_locate_help_file_with_lang): added/impl.
	(yelp_uri_new): removed the GError-argument.

	* src/test-uri.c (main): 
	- be a GnomeProgram so that it can actually test something :)

	* src/yelp-error.h: added YELP_ERROR_URI_NOT_EXIST

	* src/yelp-uri.[ch]: 
	- Added, this is functions for manipulating and working with the
	  different uri-schemes possible.

	* src/Makefile.am:
	- added test-uri.
	- added yelp-uri.[ch]

2002-05-04  Sander Vesik <sander.vesik@sun.com>

	* stylesheets/yelp-customization.xsl: remove non-linking Next >>>
	  and change the codition that triggers table of contents in hopes
	  it fixes the bug where it is not displayed

2002-05-02  Sander Vesik <sander.vesik@sun.com>

	* stylesheets/yelp-customization.xsl: add 'About This Document' link,
	  change toc to contents, change prev to previous, fix whitespace in
	  itemized lists and variable lists

2002-05-02  Jacob Berkman  <jacob@ximian.com>

	* configure.in: bump version back to 0.6.99

2002-05-01  Sander Vesik <sander.vesik@sun.com>

	* stylesheets/yelp-customization.xsl:	introduce css

2002-05-01  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-view-toc.c (yelp_view_toc_start): translation fix
	  reported by Jordi Mallach.

2002-04-29  Christophe Merlet  <christophe@merlet.net>

	* src/Makefile.am: Added $(DESTDIR) variable.

2002-04-29  Mikael Hallendal  <micke@codefactory.se>

	* Release 0.6.1

	* configure.in: bumped version to 0.6.1

	* NEWS: updated for 0.6.1

2002-04-28  Mikael Hallendal  <micke@codefactory.se>

	* src/Makefile.am (INCLUDES): removed -I$(includedir).

2002-04-28  Pablo Saratxaga  <pablo@mandrakesoft.com>

	* configure.in: Added "vi" entry to ALL_LINGUAS.

2002-04-27 John Fleck <jfleck@inkstain.net>

	* yelp-db2html.c
	  load/parse the DTD

2002-04-05 Jonathan Blandford  <jrb@redhat.com>

	* src/yelp-info.c (yelp_info_read_info_dir): remove unneeded
	  special case.

2002-04-23  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-util.c (yelp_util_extract_docpath_from_uri): 
	- some more fixes.

	* src/yelp-view-toc.c: added lots of \n to the outputed html,
	  makes it easier to read it.

	* src/yelp-util.c (yelp_util_extract_docpath_from_uri): 
	- make this return a string with all duplicate // printed as /.
	- This solves some IMPORTANT issues.
	- Though I did this in a lazy way (by calling gnome_vfs_uri_new
	  and then back to string with gnome_vfs_uri_to_string. Should 
	  probably look into if there is a function in gnome-vfs that does
	  this.

	* src/yelp-html.c (yelp_html_io_watch_cb): 
	- made this actually work as expected. 
	- don't use g_io_channel_read, use g_io_channel_read_chars
	  instead.

2002-04-22  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-view-content.c (yelp_view_content_show_uri): 
	- split the url and send the section in the correct way to
	  yelp_html_open_uri.

	* src/yelp-util.c (yelp_util_extract_docpath_from_uri): 
	- don't include the section/anchor/reference in the returned
	  string.
	(yelp_util_resolve_relative_uri): handle #-sections too (html).

	* src/yelp-html.c:
	(yelp_html_do_html): added.
	(yelp_html_do_docbook): get the section too.
	(yelp_html_io_watch_cb): 
	- also finish if we couldn't read as much as we wanted.
	- if section exists, jump to anchor.
	(yh_url_requested_cb): correctly handle relative url's.
	(yh_link_clicked_cb): don't shortcut if section is specified with
	  '?' which means it's docbook (which are chunked, not one big
	  document with anchors). 
	(yelp_html_open_uri): handle html, fixes: 79015

2002-04-19  Sander Vesik <sander.vesik@sun.com>
	* stylesheets/yelp-customization.xsl: make "indirect" links work
	  and make several beautification changes

2002-04-18  Sander Vesik <sander.vesik@sun.com>
	* stylesheets/yelp-customization.xsl: include yelp-custom.xsl
	  instead of gnome-custom.xsl, "fix" whitespace, collect link
	  cell drawing into their own templates, fix alignment of
	  links in the navbars

2002-04-18  Changwoo Ryu  <cwryu@debian.org>

	* configure.in (ALL_LINGUAS): Added ko (Korean).

2002-04-18  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-html.c: 
	- Use g_spawn_async_with_pipes and then io_watch to read the data
	  in asynchronous.

	* src/yelp-man.c (yelp_man_populate_tree_for_subdir): set the uri
	  for man-pages to be man:name.section instead of full path. Seems 
	  to work much much better this way.

	* src/yelp-html.c: 
	- removed is_doc from read_data-struct, not used anymore
	- Don't use the GnomeVFS module, instead call the external
	  programs directly with g_spawn.
	(yelp_html_do_non_docbook): removed, replaced by do_maninfo.
	(yelp_html_do_maninf): added. This will soon be rewritten to use
	  g_spawn_async_with_pipes.
	
2002-04-16  Abel Cheung  <maddog@linux.org.hk>

	* configure.in: Added "zh_TW" to ALL_LINGUAS.

2002-04-15  Mikael Hallendal  <micke@codefactory.se>

	* configure.in: bumped version to 0.6.99

	* Release 0.6

	* configure.in: bumped version to 0.6

	* src/yelp-window.c: fixed a couple of warnings.
	(yw_handle_url): send the error correctly to gnome_url_show,
	  thanks rhult :)

	* configure.in: bumped gtkhtml2 requirements.

	* src/yelp-html.c (yelp_html_do_non_docbook): 
	- show error dialog if open fails.

	* src/yelp-error.h (YELP_ERROR): added error for non-docbook
	  documents.

	* src/yelp-db2html.c (yelp_db2html_convert): use stylesheet from
	  stylesheets/.
	(yelp_db2html_convert): updated to reflect changes in the
	  stylesheet.

	* stylesheets/*: Added, includs patch from sander to
	  gnome-doc-list.
	
	* configure.in (AC_OUTPUT): added stylesheets/Makefile.

	* Makefile.am (SUBDIRS): added stylesheets

2002-04-14  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-view-toc.c: pretty-fied the sub-pages too.

	* src/yelp-window.c (yw_handle_url): pass the error to
	  gnome_url_show.

	* src/yelp-db2html.c (yelp_db2html_convert): better
	  error-handling.

	* src/yelp-html.c:
	(yelp_html_idle_read_end): don't free the handle twice.
	(yelp_html_idle_read_end): reset pointer to normal.
	(yelp_html_open_uri): set cursor to watch.

	* src/yelp-window.c (yw_handle_url): If error is set during
	  set_uri, popup an error-dialog describing the error.

	* src/yelp-html.c: 
	- Added support for GError's
	* src/yelp-view-index.c: same.
	* src/yelp-view-content.c: same.

	* src/yelp-db2html.c: 
	- Include gnome-i18n.h
	- Mark the error messages for translation.
	
	(yelp_db2html_convert): revert a little, in wait for sanders new
	  stylesheets.
	- use GError to signal errors while parsing document. Still needs
	  to be added to above layers. 
	- don't leek the stylesheet name.

	* src/yelp-error.[ch]: added.

	* src/yelp-view-content.c: added includes to fix warnings.

	* src/yelp-view-index.c: same.

	* src/yelp-util.c (yelp_util_extract_docpath_from_uri): 
	- added support for man and info pages too.

	* src/yelp-html.c: 
	- loads of changes :)
	- don't use GnomeVFS Async calls.
	- Read non-docbook data in an idle
	- Shortcut the gnome vfs help module and call internal
	  docbook2html code instead if document is xml/sgml docbook.
	- Needs more cleaning up and breaking out into another file/class.
	- Don't inherit HtmlView, instead inherit GObject and have a
	  get_widget function.

	* src/yelp-db2html.[ch]: added from libgnome. Use this in-proc
	  instead of calling as external scripts.

	* src/Makefile.am (yelp_SOURCES): added yelp-db2html.[ch]

	* configure.in (GNOMELOCALEDIR): depend on libxslt for the
	  docbook->html conversion.

2002-04-12  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-view-toc.c (TOC_BLOCK_SEPARATOR): fixed string, thanks
	  menthos.

2002-04-11  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-view-toc.c (yelp_view_toc_start): changed the string
	  "Get Help on..." to "Help Contents" by suggestion from Calum.

	* configure.in (GETTEXT_PACKAGE): added ja to ALL_LINGUAS

	* src/yelp-view-toc.c:
	- did some cleanups
	- make output in first page look nicer.
	- Changed a few strings, SORRY!! Fixes: #73439

	* src/yelp-view-content.c (yelp_view_content_stop): added/impl.

	* src/yelp-util.c:
	(tree_find_node_uri): renamed from tree_find_node.
	(yelp_util_find_node_from_name): added/impl.
	(tree_find_node_name): added/impl.

	* src/yelp-html.c:
	(yh_init): set content-type to utf8 on the loading document.
	(yelp_html_cancel_loading): added, doesn't do anything yet.

2002-04-10  Richard Hult  <rhult@codefactory.se>

	* src/yelp-view-index.c (yelp_view_index_new): Add a bit of
	padding around the search label.
	Put the index list in a frame with IN shadow.

2002-04-10  Padraig O'Briain  <padraig.obriain@sun.com>

	* src/yelp-scrollkeeper.c (ys_parse_index):
	Fix small memory leak (#77733)

2002-04-04  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-window.c: use GConf for the toolbar style.

	* src/yelp-html.c: added a "Loading..." while loading the
	  document. New string, sorry about that. This also needs a new
	  change in gtkhtml2 so I'll update the reqs after the next
	  release of gtkhtml2.

	* configure.in (GNOMELOCALEDIR): added gconf-2.0

2002-04-03  Gustavo Maciel Dias Vieira  <gdvieira@zaz.com.br>

	* configure.in (ALL_LINGUAS): Added pt_BR.

2002-03-25  Mikael Hallendal  <micke@codefactory.se>

	* NEWS: updated (oops, missed 0.5 release).

	* configure.in: bumped version to 0.5

2002-03-24  Zbigniew Chyla  <cyba@gnome.pl>

	Fixes #72583

	* src/yelp-view-toc.c (yelp_view_toc_write_header):
	Put <meta http-equiv="Content-Type" ...> _before_ <title> tag
	so that document's encoding is known before we encounter localized
	title (UTF-8 string).

2002-03-23  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-info.c (yelp_info_init): 
	- Fixed #75218
	- Read INFOPATH to locate path to info files.

	* src/yelp-util.c:
	(yelp_util_extract_docpath_from_uri): reverted this to it's
	  initial behaviour.
	(yelp_util_split_uri): added this instead which supports
	  ghelp/man/info uri's. It also always have the type of uri 
	  prepended in the return uri.

	* src/yelp-html.c (yelp_html_open_uri): this function is getting
	  ugly, have to clean it up.
	(yelp_html_open_uri): use yelp_util_split_uri intead to get the
	  docpath and the anchor (it supports man and info too, not just
	  ghelp:-uri's. Fixes #72637).

	* src/yelp-window.c: commented out the Quit-option, we might not
	  want to have it around because you often use Yelp in another way
	  (ie. klicking Help in an application). Fixes #75081

	* src/yelp-view-toc.c (yelp_view_toc_open_url): scroll to the
	  beginning of the document after reading it. Fixes #72965

	* src/yelp-util.c:
	(yelp_util_extract_docpath_from_uri): added an argument if we want
	  the return docpath to be prepended with "ghelp:" or not.
	(yelp_util_find_anchor_in_uri): added/impl.

	* src/yelp-scrollkeeper.c (ys_parse_toc_section): use strstrip
	  instead of strchomp to clean up the name.

	* src/yelp-html.c:
	(yh_link_clicked_cb): also jump if the relative reference is ?foo
	(yelp_html_open_uri): don't reload the page if it's the same as
	  already showing.

2002-03-20  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-view-index.c (set_relation): style-fixes.

2002-03-20  Jagadeesh B. G  <jagadeesh.bana@wipro.com>

	* src/yelp-view-index.c: Set atk relation for search entry and
	  label as part of accessibility changes

2002-03-20  Padraig O'Briain  <padraig.obriain@sun.com>

	* src/yelp-window.c (yw_handle_url): Call yelp_view-content)show_uri()
	before gtk_notebook_set_current_page() (#75570)

2002-03-20  Christophe Merlet  <redfox@eikonex.org>

	* configure.in: Added fr to $ALL_LINGUAS.

2002-03-19  Mikael Hallendal  <micke@codefactory.se>

	* configure.in: bumped version to 0.4.99

	* Release 0.4
	
	* configure.in: updated to 0.4

2002-03-19  Sandeep V Honde  <sandeep.honde@wipro.com>

	* src/yelp-main.c:
	- Session management support for multiple
	  windows added.
	  (yelp_save_session)    :modified.
	  (yelp_restore_session) :added/impl.

2002-03-04  Mikael Hallendal  <micke@codefactory.se>

	* configure.in: bumped version to 0.3.99

	* Release 0.3

	* configure.in: 
	- updated version to 0.3
	- updated deps of libgnome and gtkhtml2

	* NEWS: updated for 0.3

2002-03-05  Wang Jian  <lark@linux.net.cn>

	* configure.in: Added "zh_CN" to ALL_LINGUAS.

2002-03-04  Pablo Saratxaga  <pablo@mandrakesoft.com>

	* src/yelp-window.c: add a comment for translators

2002-03-03  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-man.c:
	- Fixes #73292
	(yelp_man_populate_tree_for_subdir): add to section index list.
	(yelp_man_init): concat the man index list with the global.

	* src/yelp-info.c (yelp_info_init): call strdown on the names
	  before adding to index.

	* src/yelp-index-model.c (yelp_index_model_filter): don't show all
	  index-words by default. Only show the words matching the
	  query. Not sure what is the best way to do this, but with all
	  man and info pages in the index it got pretty crowded.

	* src/yelp-base.c (yelp_base_new): pass index to man_init.

	* src/yelp-window.c (yelp_window_new): fixed an error if you don't
	  have an index installed (thanks rhult).

	* src/yelp-index-model.c: use the new YELP_SECTION-macro.
	* src/yelp-view-toc.c: same.
	* src/yelp-util.c: same.
	* src/yelp-scrollkeeper.c: same.

	* src/yelp-section.h: added casting macro YELP_SECTION.

	* src/yelp-base.c (yelp_base_new): pass index-list to info init.

	* src/yelp-info.c (yelp_info_init): 
	- Fixes #73291
	- added index-list to argument.
	- add info pages to index-list.

	* src/yelp-view-toc.c (yelp_view_toc_start): 
	- Fixes #72146
	- Don't show "Other documents" if neither man or info are
	  installed.
	- Don't show "Manual pages" link if no man pages are installed
	- Don't show "Info pages" link of no info pages are installed.

	* src/yelp-man.c (yelp_man_init): 
	- return FALSE and don't create a topnode 'man' in the content
	  tree if there weren't any man pages installed.

	* src/yelp-info.c (yelp_info_init): 
	- return FALSE if no info pages was found. Also don't create the
	  topnode 'info' in the content-tree if there weren't any pages.

	* src/yelp-html.c: removed commeted code.

	* src/yelp-base.c (yelp_base_new): don't care about the result for
	  now.

	* src/yelp-info.c:
	- Fixes #73270
	(yelp_info_read_info_dir): renamed from
	  yelp_info_populate_tree_for_subdir. It not takes a list instead.
	(yelp_info_init): First read the sections into a list, sort it and
	  append it to the GNode.

	* src/yelp-info.c: conform with the Yelp coding style.
	* src/yelp-man.c: same

	* configure.in (GNOMELOCALEDIR): depend on a certain number of
	  libgnome, will update this when new libgnome get's released.

	* src/yelp-window.c:
	- Fixes #73056
	(yelp_window_new): don't create index view if no index is
	  available.  
	(yw_create_toolbar): don't add index-button if index is not
	  available. 
	(yw_populate): don't insert index page in notebook if index is not
	  present.

	* src/yelp-base.c:
	(impl_Yelp_getWindows): added/impl.
	(yelp_base_class_init): use getWindows.

	* idl/GNOME_Yelp.idl (GNOME): 
	- Added getWindows which returns a sequence of strings with the
	  URL's of all open windows. This is needed to save the
	  session-state. (Fixes #73184).

	* src/yelp-window.c:
	(yelp_window_get_current_uri): added, needed for session
	  management.

	* src/yelp-html.c (yh_free_stream_data): removed debug printout.

	* src/yelp-view-index.c:
	- Fixed #67954
	(yvi_html_url_selected_cb): implemented.
	(yelp_view_index_show_uri): fixed compile warning.

	* src/yelp-window.c:
	(yw_handle_url): check if url starts with index:, if so, let
	  YelpViewIndex handle it.
	(yelp_window_new): connect to url_selected on YelpViewIndex.

	* src/yelp-view-index.c:
	- added URL_SELECTED signal.
	(yvi_index_selection_changed_cb): emit url_selected.
	(yvi_entry_activated_cb): fixed warning.
	(yvi_filter_idle): same.
	(yelp_view_index_show_uri): added/impl.

	* src/yelp-view-content.c: removed the title-changed signal for
	  now. I should really make all views derive from the same
	  object. Lots of things are similar. (at least for YelpViewIndex
	  and YelpViewContent.

	* src/yelp-scrollkeeper.c:
	(ys_parse_index_item): 
	- add a ? before the link.
	- add a index: before the uri
	  The uri will now be index:ghelp:... (not soo nice but it's to
	  make the window know which view it is).

2002-03-02  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-view-index.c:
	- removed lots of debug output.
	(yvi_entry_changed_cb): implemented. call filter from idle.
	(yvi_filter_idle): added/impl.
	(yvi_search): removed.

	* src/yelp-section.c:
	(yelp_section_compare): take the arguments as gconstpointer so the
	  function doesn't have to be cast everytime used.

	* src/yelp-scrollkeeper.c:
	(ys_parse_index_item): 
	- don't add title if it's not valid utf8. Is this check needed?
	- call strdown on all title's in the index-terms.

	* src/yelp-index-model.c:
	(yelp_index_model_filter): added/impl.

	* src/yelp-view-index.c:
	(yvi_index_selection_changed_cb): use the column-enum to specify
	  columns.

	* src/yelp-index-model.c:
	(yim_init): initially set index_words to NULL.
	(yim_get_column_type): return the correct type.
	(yim_get_value): add support for the extra hidden section column.
	(yelp_index_model_set_words): inform that new lines have been
	  added to the model.

	* src/yelp-index-model.h: added a column-enum

	* src/Makefile.am: removed gtktreemodelfilter

	* src/gtktreemodelfilter.[ch]: removed, not used and _kris_ is
	  doing the development in libegg now.

	* src/yelp-view-index.c: 
	- replaced the old ListStore with the new YelpIndexModel.
	(yvi_index_term_add): removed, not needed when using own model.
	(yvi_setup_index_view): removed.
	
	* src/yelp-index-model.[ch]: missed some copy&paste-changes when
	  copying the model from MrProject :)
	(yelp_index_model_set_words): added.

	* src/yelp-view-index.c: 
	- in-the-middle-commit on index search stuff.
	(yvi_entry_changed_cb): added
	(yvi_entry_activated_cb): added
	(yvi_entry_text_inserted_cb): added
	(yvi_search): added
	(yvi_complete_idle): added
	(yvi_complete_func): added
	(yelp_view_index_new): connect to signals in the entry.

	* src/yelp-scrollkeeper.c: removed debug variable.

	* src/yelp-index-model.[ch]: added model for the index.

	* configure.in: added compile warnings.

2002-02-28  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-window.c:
	(yw_about_cb): added translator-credits to about-box.
	- #72636 fixed.
	- added GtkItemFactory to priv-struct.
	- added a Go-menu with the actions from the toolbar in it.
	- removed accelerators from toolbar items.
	- renamed some functions that made it easier to add the Go-menu.

2002-02-28  Sandeep V Honde <sandeep.honde@wipro.com>

	* src/yelp-main.c :
	- Basic support for Session Management.
	(yelp_save_session): added/impl.
	(yelp_client_die)  : added/impl.  

2002-02-28  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-view-index.c:
	(yelp_view_index_new): Added "Search for:" label in fron of the
	  search entry. Fixes #72643

	* src/yelp-window.c:
	(yw_create_toolbar): 
	- Update string, fixes #72634
	- Update string, fixes #72635

	* src/yelp-view-toc.c:
	(yelp_view_toc_man_1): Update string, fixes #72638
	(yelp_view_toc_start): Update string, fixes #72632

2002-02-25  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-view-index.c:
	(yvi_index_term_add): added/impl.
	(yvi_setup_index_view): added/impl.
	(yelp_view_index_new): call yvi_setup_index_view.

	* src/yelp-scrollkeeper.c: removed some debug printouts.

	* src/yelp-window.c:
	(yelp_window_new): added index-list to arguments.

	* src/yelp-view-index.c: started to fix (was a copy&paste from
	  yelp-view-content.

	* src/yelp-section.h: added YELP_SECTION_INDEX to YelpSectionType.

	* src/yelp-section.c: include string.h, fixes compile warning.

	* src/yelp-scrollkeeper.c:
	- Basic support for ScrollKeeper index added
	- use g_ascii_strcasecmp instead of depricated g_strcasecmp.
	  Thanks to the wipro guys for notifying.
	(ys_parse_index): added/impl.
	(ys_parse_index_file): added/impl.
	(ys_parse_index_item): added/impl.
	(yelp_scrollkeeper_init): 
	- added GList **index to arguments.

	* src/yelp-main.c:
	(yelp_main_open_new_window): use g_error
	(yelp_main_start): same.

	* src/yelp-history.c: include string.h, fixes compile warning.

	* src/yelp-base.c: added index-list to priv-struct
	(yelp_base_new): call scrollkeeper_init with index-list
	(yelp_base_new_window): send the index-list to the new window.

2002-02-22  Kjartan Maraas  <kmaraas@gnome.org>

	* src/yelp-main.c: Remove unsupported #ifdef ENABLE_NLS stuff.
	
2002-02-20  Simos Xenitellis  <simos@hellug.gr>

	* configure.in: Added "el" to ALL_LINGUAS.

2002-02-18  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-history.c (yelp_history_goto): don't add entry to
	  history list if it's the same as the current.

	* src/yelp-window.c (yw_home_button_clicked): Notify the history
	  list that we have moved.

	* src/yelp-view-index.c (yvi_tree_selection_changed_cb): call
	  yelp_html_open_uri instead of yelp_html_open_section.

	* src/yelp-html.[ch] (yelp_html_open_uri): renamed from
	  yelp_html_open_sectoin. It now takes an uri and a reference 
	  instead of a YelpSection.

	* src/yelp-view-content.c (yelp_view_content_show_uri): call
	  yelp_html_open_uri instead of creating a temporary YelpSection.

	* src/yelp-view-toc.c (yelp_view_toc_man_2): don't send html for
	  translations, reported by Christian Rose

	* src/yelp-window.c (yw_init): make the default size smaller.

	* src/yelp-view-toc.c: typedef the YelpImportantDocsSection struct
	(yelp_view_toc_start): only write section topic for important
	  documents if there is any documents installed in that section.

	* src/yelp-util.c (yelp_util_extract_docpath_from_uri): 
	- Also work for sgml documents.

2002-02-18  Gediminas Paulauskas <menesis@delfi.lt>

	* configure.in: remove GNOME_COMMON_INIT, GNOME_PLATFORM_GNOME_2

2002-02-17  Tõivo Leedjärv  <leedjarv@interest.ee>

	* configure.in: Added et to ALL_LINGUAS.

2002-02-13  jacob berkman  <jacob@ximian.com>

	* src/Makefile.am (install-exec-local): rename install-local since
	automake doesn't like it

2002-02-13  Alex Larsson  <alexl@redhat.com>

	* src/yelp-view-toc.c (yelp_view_toc_write, yelp_view_toc_close,
	yelp_view_toc_open): 
	Implement buffering writes for generated html.

2002-02-13  Alex Larsson  <alexl@redhat.com>

	* src/Makefile.am (install-local):
	Remove old gnome-help binary, if any.
	
2002-02-13  Alex Larsson  <alexl@redhat.com>

	* src/Makefile.am (install-local):
	Install a gnome-help symlink

2002-02-13  Mikael Hallendal  <micke@codefactory.se>
	
	* configure.in: release 0.2.1

	* reverted binary name change.

	* src/yelp-main.c (main): initiate url to empty string instead of
	  NULL. Fixed #71350
	
	* src/yelp-base.c (impl_Yelp_newWindow): check if url is empty
	  before trying to open it.

2002-02-12  Alex Larsson  <alexl@redhat.com>

	* important_docs.xml:
	* src/yelp-view-toc.c:
	Add sections to the important docs file
	Consistently call it "Manual pages" instead of "Man pages".
	Add link back to toc:man from the secondary level man page indexes.

2002-02-10  Mikael Hallendal  <micke@codefactory.se>

	* src/*.c: cleaned up includes
		
	* src/yelp-util.c (yelp_util_extract_docpath_from_uri): remove
	  warning.
	
	* src/yelp-window.c (yw_handle_url): show external URL's in
	  external viewer. #67962

2002-02-06  Alex Larsson  <alexl@redhat.com>

	* src/yelp-util.c (yelp_util_extract_docpath_from_uri):
	Correctly handle the case when gnome_vfs_uri_new() fails.

2002-01-31  Satan  <snickell@stanford.edu>

	* Makefile.am:
	* gnome-help.desktop.in:
	* src/Makefile.am:
	* yelp.desktop.in:

	Renname stuff to "gnome-help".

	Because I'm a boring kind of guy.
	
2002-01-31  Roy-Magne Mo  <rmo@sunnmore.net>

	* configure.in: Added nn to ALL_LINGUAS.

2002-01-30  Zbigniew Chyla  <cyba@gnome.pl>

	* configure.in (ALL_LINGUAS): Added pl (Polish).

2002-01-30  Mikael Hallendal  <micke@codefactory.se>

	* configure.in: bumped version to 0.2.99

	* Release 0.2

	* src/yelp-view-toc.c (yelp_view_toc_write_header): added encoding
	  utf-8 to html header.

	* README: updated

	* configure.in: bumped version.
	
	* src/yelp-util.c: removed debug printouts.

	* src/yelp-html.c: hide debug printouts.

	* src/yelp-view-content.c: same.

	* src/yelp-window.c: same.
	
	* src/yelp-window.c (yw_populate): translate strings from item
	  factory.

	* src/yelp-view-toc.c 
	(yelp_view_toc_start): marked strings for translation.
	(yelp_view_toc_start): same.
	(yelp_view_toc_man_2): same.
	(yelp_view_toc_man_1): same.
	(yelp_view_toc_info): same.
	(yelp_view_toc_scrollkeeper): same.

	* src/yelp-window.c:
	(yw_url_selected_cb): 
	- if both base_url and url is set call resolve_relative_url to get
	  the absolute url. 
	- if only one of them is set, use that one.

	* src/yelp-view-content.c: 
	- moved the scrolled window for the tree into the priv-class.
	(yvc_tree_selection_changed_cb): emit url-selected signal.
	(yelp_view_content_show_path): removed, unused.
	(yelp_view_content_show_uri): 
	- hide the tree if: man, info or xml/sgml document without TOC.
	- don't reload the tree if it's the same document that's going to
	  be showed again.
	- Retrieve the ScrollKeeper tree based on fullpath uri to file,
	  relative link stripped.

	* src/yelp-util.c: 
	(yelp_util_contents_add_section): removed, unused.
	(yelp_util_resolve_relative_uri): if uri starts with ? just concat
	  the base_uri with the relative link.
	(tree_find_node): Search a tree to find a node that matches an
	  uri.
	(yelp_util_find_node_from_uri): traverse the tree to find the node
	  for a certain URI.
	(yelp_util_extract_docpath_from_uri): added, helper function that
	  takes a URI and calculates an absolute path to the document
	  (without anchors). This is used to find the TOC tree for that
	  document. This function needs some tweaking.

	* src/yelp-scrollkeeper.[ch] 
	(yelp_scrollkeeper_get_toc_tree): renamed from
	  ..._get_toc_tree_model.

2002-01-29  Seth Nickell  <snickell@stanford.edu>

	* yelp.desktop.in:

	Tweak comment.

2002-01-27  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-view-content.c: added title-changed signal. Shouldn't
	  perhaps be here. Will perhaps remove it and do it all from 
	  YelpWindow.
	
	* src/yelp-util.[ch] (yelp_util_find_node_from_uri): added
	  unimpl.

	* src/yelp-marshal.list: added VOID:STRING

	* src/yelp-main.c (main): look if an extra argument was passed, if
	  it was send it to yelp_main_start.
	(yelp_main_idle_start): take url as argument
	(yelp_main_start): dito
	(yelp_main_open_new_window): send url to GNOME_Yelp_newWindow

	* src/yelp-base.c (impl_Yelp_newWindow): take a url argument. If
	  it's not NULL it will open the window with that URI showing.

	* idl/GNOME_Yelp.idl (GNOME): newWindow now takes a url-argument.

	* src/yelp-view-content.c (yelp_view_content_show_uri): 
	- if uri starts with ghelp:, try to find the TOC for that document
	  in scrollkeeper. If it's found, display it in the tree widget.

	* src/yelp-scrollkeeper.c: 
	- Removed old stuff outcommented and unused code.
	(ys_parse_toc_section): fill a GNode tree instead of GtkTreeStore.
	(yelp_scrollkeeper_get_toc_tree_model): use GNode instead of
	  GtkTreeStore.

	* src/yelp-html.c (yelp_html_open_section): NULL-terminate list of
	  strings to g_strconcat.

	* src/yelp-scrollkeeper.c:
	(yelp_parse_toc): removed, code moved to
	  yelp_scrollkeeper_get_toc_tree_model 
	(yelp_scrollkeeper_get_toc_tree_model): moved the code from
	  yelp_parse_toc. 

	* src/yelp-main.c (yelp_main_start): give an error if we can't
	  active the yelp-base, might solve #69134. Not the cause but the 
	  segfault.
	(yelp_main_idle_start): dito.

2002-01-26  Mikael Hallendal  <micke@codefactory.se>

	* src/Makefile.am: removed BUILD_SOURCES since it seems to create
	  problems with automake 1.4.

        * Thanks to Laszlo PETER <Laszlo.Peter@ireland.sun.com> for the
	  following patches.
	
	* src/yelp-view-toc.c:
	(yelp_view_toc_write_header): buildfixes when not using gcc.
	(yelp_view_toc_start): dito

	* src/yelp-html.c: build fixes when not using glibc.

	* configure.in: make yelp build with other compilers than GCC.

	* src/yelp-window.c:
	- Fixed history
	(yw_handle_url): added, broke out code from
	  yw_url_selected_cb. Called from history_button_clicked too.  
	(yw_url_selected_cb): call yw_handle_url instead of parsing the
	  url internally. If yw_handle_url returns TRUE, add the url in
	  the history.

2002-01-25  Alex Larsson  <alexl@redhat.com>

	* important_docs.xml:
	New file.
	
	* Makefile.am:
	Install important_docs.xml

	* src/yelp-view-toc.c:
	Parse important_docs.xml instead of hardcoding them
	
	* configure.in:
	Remove "hu" from ALL_LINGUAS, as it breaks the build.

2002-01-25  Ole Laursen  <olau@hardworking.dk>

	* configure.in: Added "da" to ALL_LINGUAS.

2002-01-25  Szabolcs Ban  <shooby@gnome.hu>

        * po/hu.po: Added Hungarian translations from Emese Kovacs
        <emese@gnome.hu>, cvs troubles solved, sorry for that

Fri Jan 25 12:43:19 2002  Owen Taylor  <otaylor@redhat.com>

	* configure.in: Remove 'hu' from ALL_LINGUAS since
	the po file wasn't actually added. 

2002-01-25  Szabolcs Ban  <shooby@gnome.hu>

        * po/hu.po: Added Hungarian translations from Emese Kovacs
        <emese@gnome.hu>

2002-01-24  Alex Larsson  <alexl@redhat.com>

        * src/yelp-util.[ch]:
	Add yelp_util_find_toplevel().
	
	* src/yelp-view-content.[ch]:
	Add some tree support.

	* src/yelp-view-toc.c:
	Add scrollkeeper support.

	* src/yelp-window.c:
	Remove old crap, make content view work again.
	
2002-01-24  Alex Larsson  <alexl@redhat.com>

	* src/yelp-view-toc.c:
	Add initial scrollkeeper support.

2002-01-24  Alexander Shopov  <al_shopov@web.bg>

	* configure.in (ALL_LINGUAS): added "bg"

2002-01-23  Alex Larsson  <alexl@redhat.com>

	* src/yelp-scrollkeeper.[ch]:
	Implement seriesid lookup.

	* src/yelp-view-toc.c:
	Fix the startpage to contain the seriesid docs, and
	be more dynamic.

2002-01-23  Alex Larsson  <alexl@redhat.com>

	* src/yelp-util.c:
	Change path separator to '/'.

	* src/yelp-view-toc.c:
	Implement simple toc:info URL handler.

2002-01-23  Alex Larsson  <alexl@redhat.com>

	* src/yelp-util.c:
	Clean up section->name usage
	
	* src/yelp-view-toc.c:
	Clean up and fix double free in yelp_view_toc_full_path_name()

2002-01-22  Alex Larsson  <alexl@redhat.com>

	* src/yelp-man.c (yelp_man_push_initial_tree):
	Fix silly bug.

	* src/yelp-util.[ch]:
	Add functions to go between Nodes in the doc tree and
	string paths.

	* src/yelp-view-toc.c:
	Update man handling to GNodes.

2002-01-23  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-window.c (yw_history_button_clicked): 
	- use string instead of YelpSection with history.

	* src/yelp-history.[ch]: work with strings instead of
	  YelpSection. 

2002-01-22  Hasbullah Bin Pit <sebol@ikhlas.com>

	* configure.in: Added ms to ALL_LINGUAS.
	* po/ms.po: Added Malay Translation by
          Mohamad Afifi Omar <mr_mohd_afifi@yahoo.com> and me.

2002-01-22  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-view-toc.c: started to rewrite to use GNode-tree
	  instead of GtkTreeStore.

	* src/yelp-base.c: use a GNode-tree instead of the GtkTreeStore.

	* src/yelp-window.c: dito.

	* src/yelp-scrollkeeper.[ch]: dito.

	* src/yelp-man.[ch]: dito.

	* src/yelp-info.[ch]: dito.

	* src/yelp-window.c: use stock items for menu.

2002-01-21  Alex Larsson  <alexl@redhat.com>

        * src/yelp-marshal.list:
	Add a boolean the the marshaller needed for url_selected

	* src/yelp-section.h:
	Fix typo in #endif
	
        * src/yelp-html.[ch]:
	Change section_selected to url_selected
	
	* src/yelp-view-content.[ch]:
	Add url_selected signal that proxies YelpHtml::url_selected
	Implement yelp_view_content_show_uri.

	* src/yelp-view-index.c:
	Change section_selected to url_selected

	* src/yelp-view-toc.[ch]:
	Change path_selected to url_selected
	More man index work.
	Moved startpage to it's own function.
	Exported yelp_view_toc_open_url().

	* src/yelp-window.c:
	Common way to follow link is now the url_selected signal
	on views.

2002-01-21  jacob berkman  <jacob@ximian.com>

	* src/Makefile.am (EXTRA_DIST): the .list file has a -

2002-01-21  Seth Nickell  <snickell@stanford.edu>

	* yelp.desktop.in:

	Call it "Help".

2002-01-19  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-base.c
	(yelp_base_window_finalized_cb): added/impl. 
	  quit the bonobo-main when last window is destroyed.
	(yelp_base_new_window): add a weak ref to the new window. used to
	  be able to quit bonobo-main when last window is destroyed.

	* src/yelp-info.c (yelp_info_init): 
	- check if /usr/share/info and /usr/info is the same before adding
	both.

	* src/yelp-man.c (yelp_man_init): 
	- Use g_spawn_command_line_sync instead of popen.
	- if 'manpath' command is not found, look for MANPATH env. before
	  using /usr/man and /usr/share/man
	- cleaned up a little to better fit into Yelp code.

	* src/yelp-html.c (yelp_html_new): remove the temp printout. just
	  print Yelp for now.

	* src/yelp-man.c (yelp_man_init): 
	  check that /usr/man and /usr/share/man doesn't point to the same
	  place. 

	* src/yelp-scrollkeeper.c:
	(ys_strip_scheme): rewrote to
	- accept NULL instead of scheme
	- return the new string instead of breaking down the one passed
	  in.
	- use strstr instead of g_strstr_len with the entire string as
	  len.
	(ys_parse_doc): 
	- send NULL to ys_strip_scheme since we are not interested in the
	  scheme for now. Also clean up that stuff a bit. 
	- call xmlFree on the xml-strings instead of g_free.
	- don't free docsource before it's last use :)

2002-01-19  Alexander Larsson  <alla@lysator.liu.se>

	* src/yelp-scrollkeeper.c (ys_strip_scheme):
	Set *scheme, not scheme on error

2002-01-18  Alex Larsson  <alexl@redhat.com>

	* configure.in:
	Add AM_PATH_GLIB_2_0 to get GLIB_GENMARSHAL

	* src/yelp-marshal.list
	* src/Makefile.am:
	Generate marshaller files
	
	* src/yelp-view-toc.[ch]:
	New url_selected signal.

	* src/yelp-scrollkeeper.c:
	Fix leak
	
2002-01-17  Alex Larsson  <alexl@redhat.com>

	* src/yelp-window.c (yw_populate):
	Make TOC view scrolled window policy AUTO.
	
	 * yelp-view-toc.c:
	 More initial man work.
	 
2002-01-16  Seth Nickell  <snickell@stanford.edu>

	* Makefile.am:
	* yelp.desktop.in:

	Install .desktop file into the proper location, and fix
	its Categories field. Use the gnome-help.png icon. 
	
2002-01-15  Alex Larsson  <alexl@redhat.com>

	* src/yelp-view-toc.c:
	Initial work on sane html generation, including some
	man index work.

	* yelp-info.c:
	* yelp-man.c:
	* yelp-scrollkeeper.c:
	Rename the toplevel nodes to "man", "info" and "scrollkeeper".
	
Tue Jan 15 23:27:44 2002  Kristian Rietveld  <kris@gtk.org>

	* src/gtktreemodelfilter.[ch]: update

2002-01-14  Alex Larsson  <alexl@redhat.com>

	* yelp-section.[ch]:
	Add section type to section.

	* src/yelp-html.c:
	* src/yelp-info.c:
	* src/yelp-man.c:
	Update for the section type change.

	* src/yelp-scrollkeeper.c: 
	Update for the section type change.
	Make a scrollkeeper toplevel node.

2002-01-14  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-view-toc.[ch]: renamed from YelpViewHome.

	* src/yelp-window.c: use YelpViewTOC instead of YelpViewHome.

	* AUTHORS: added Alexander Larsson

	* src/yelp-window.c (yw_about_cb): added Alexander Larsson to
	authors.

	* configure.in: bumped version to 0.1.99

2002-01-11  Alex Larsson  <alexl@redhat.com>

	* src/yelp-html.c (yh_link_clicked_cb):
	Shortcut pure relative links.
	(yelp_html_open_section): If there is a fragment
	in the uri, put that in sdata->anchor so that we
	jump to the anchor on load.

2002-01-11  Alex Larsson  <alexl@redhat.com>

	* src/yelp-util.[ch]:
	Add yelp_util_resolve_relative_uri() that resolves
	relative text uris. Taken from Gnome VFS. We can't use
	the Gnome-vfs one, since gnome_vfs_uri_new() expands
	the uris.
	
	* src/yelp-html.c (yh_link_clicked_cb):
	Correctly follow relative URIs.

2002-01-11  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-window.c (yw_create_toolbar): don't include help-on in
	  the toolbar.

2002-01-10  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-view-content.c: 
	- use the new GtkTreeModelFilter.
	(yvc_tree_selection_changed_cb): get the model from the actual
	  tree and use it to get the section selected.
	(yelp_view_content_new): don't set the model here, use the
	  filtered model in content_show_path instead.
	(yelp_view_content_show_path): set the model to a filtered model
	  with virtual root set to the selected path.

	* src/yelp-util.c (yelp_util_contents_add_section): set third
	  hidden filter-column to always TRUE (always visible).

	* src/yelp-base.c (yelp_base_init): added boolean hidden column
	  needed by the filtering.

	* src/gtktreemodelfilter.[ch]: added GtkTreeModelFilter from
	  Kristian Rietval, this is temporaray until this makes it into
	  Gtk+ or some extra library.

	* src/Makefile.am:
	(yelp_LDADD): added libgtktreemodelfilter
	(noinst_LTLIBRARIES): added libgtktreemodelfilter.

2002-01-10  Christian Rose  <menthos@menthos.com>

	* configure.in: Added "nl" to ALL_LINGUAS.

2002-01-09  Alex Larsson  <alexl@redhat.com>

	* acconfig.h:
	* configure.in:
	Look for libbz2

	* src/Makefile.am
	* src/yelp-man.[ch]:
	* src/yelp-info.[ch]:
	New files

	* src/yelp-base.c (yelp_base_new):
	Call yelp_man_init() and yelp_info_init().

	* src/yelp-section.[ch]:
	Add yelp_section_compare for sorting by name.

2002-01-09  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-base.[ch]: use BonoboObject instead of BonoboXObject,
	  thanks rhult for notifying me.

2002-01-06  Christian Rose  <menthos@menthos.com>

	* configure.in: Added "es" to ALL_LINGUAS.

2002-01-06  Fatih Demir <kabalak@gtranslator.org>

	* configure.in: Added "tr" to the languages list.

2002-01-06  Germán Poo-Caamaño <gpoo@ubiobio.cl>

	* configure.in: Added spanish (es) to ALL_LINGUAS

2002-01-05  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-window.c (yw_exit_cb): use bonobo_main_quit instead of
	  gtk_main_quit. This should be moved to yelp-base instead.

	* src/yelp-view-content.c:
	(yelp_view_content_show_uri): added, not impl.

	* src/yelp-main.c: 
	- uses bonobo-activation to start Yelp and connect to an already
	  running instance.
	(yelp_base_factory): added. the factory-function.
	(yelp_main_activate_base): added, gets an CORBA_Object reference
	  to the YelpBase.
	(yelp_main_open_new_window): added, calls GNOME_Yelp_newWindow on
	  the CORBA_Object to open a new window.
	(yelp_main_start): added, called if another instance is already
	  running. 
	(yelp_main_idle_start): called from an idle function if this is
	  the first instance.
	(main): start the factory. and call yelp_main_start or
	  yelp_main_idle_start depending on if it's the first instance. 

	* src/yelp-base.[ch]:
	- Made a BonoboXObject instead of GObject.
	(impl_Yelp_newWindow): added, implemented GNOME_Yelp_newWindow. 
	(yelp_base_class_init): initialize the epv-functions.
	

	* src/Makefile.am: updated for idl and .server
	  generation.

	* src/GNOME_Yelp.server.in: added for bonobo-activation.

	* idl/GNOME_Yelp.idl: Added. Yelp-interface (might be a module
	  eventaully).

	* configure.in: updated for use with bonobo.

	* Makefile.am (EXTRA_DIST): added idl/GNOME_Yelp.idl

2002-01-04  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-main.c (main): removed setlocale

2002-01-04  Jody Goldberg <jody@gnome.org>

	* configure.in (CFLAGS) : do no use continuation characters.  It
	  irritates auto*/sed on my system.

2002-01-04  Mikael Hallendal  <micke@codefactory.se>

	* TODO: updated, moved issues to bugzilla.

2001-12-27  Duarte Loreto <happyguy_pt@hotmail.com>

        * configure.in: Added portuguese to ALL_LINGUAS

2001-12-22  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-window.c:
	(yw_close_window_cb): added. yelp-base should listen to
	  destroy-signal of all windows, so it knows when to quit.
	- Added Close window in File menu

2001-12-12  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-window.c (yw_populate): add Accel group.
	(yw_create_toolbar): added tooltips, needs update

2001-12-11  Stanislav Visnovsky  <visnovsky@nenya.ms.mff.cuni.cz>

	* configure.in: Adde "sk" to ALL_LINGUAS.

2001-12-10  Kjartan Maraas  <kmaraas@gnome.org>

	* configure.in: Added "no" to ALL_LINGUAS.
	
2001-12-10  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-window.c (yw_class_init): added signal for new window.
	(yw_new_window_cb): amit new_window_requested-signal

	* src/yelp-base.c:
	(yelp_base_new_window_cb): added, listens for new_window_requested
	  from windows.
	(yelp_base_new_window): connect to signal in gtk-window.

	* TODO (FEATURES): updated
	

	* src/yelp-window.c: Some fixes after discussion with seth.
	(yw_init): Yelp: GNOME Help Browser -> Help Browser.
	(yw_populate): readded the menu
	(yw_close_cb): removed
	(yw_new_window_cb): readded
	(yw_exit_cb): readded
	(yw_about_cb): readded
	(yw_create_toolbar): removed the Close-button

	* configure.in: changed Yelp->yelp in AM_INIT_AUTOMAKE.

	* src/yelp-view-home.c (yelp_view_home_new): 
	- updated color to white background, less difference between the
	  views now.

	* src/yelp-window.c: 
	- cleaned up a little.
	- now has tree views (home/content/index) in a Notebook
	- First shows the Home-page, when click a link in it, swap to
	  content-view.
	(yw_populate): only set up the notebook, other code moved to the
	  three views.
	(yw_create_toolbar): new function, creates the toolbar.

	* src/yelp-view-index.[ch]: 
	- added
	- this handles the index view (with index-term searching to the
	  left).
	- not finished.

	* src/yelp-view-home.[ch]: 
	- Now draws an test-page. This should be made nicer.
	- The HTML-stuff is _not_ finished.
	- Signals path_selected when a user press a link.
	
	* src/yelp-view-doc.[ch]: removed, I must have been tired when
	  commiting this :)

	* src/yelp-view-content.[ch]: 
	- added
	- takes care of the content-view (the one with the tree to the
	  left).
	- This view is accessed from the home-view.
	
	* src/yelp-toc.[ch]: removed, now handled inside
	  yelp-view-content.[ch].
	
	* src/yelp-scrollkeeper.c:
	(ys_parse_book): only parse if Toplevel == GNOME.

	* src/yelp-index.[ch]: removed, this is now handled inside
	  yelp-view-index.c
	
	* src/yelp-view.[ch]: moved to yelp-html, yelp-view-* is the
	  various main-views.

	* src/yelp-html.[ch]: added, this is the previous yelp-view.[ch]

	* src/yelp-base.c: priv->bookshelf -> content_store.
	(yelp_base_get_bookshelf): removed, was used by YelpWindow, but
	  YelpWindow shouldn't know anything about YelpBase.
	(yelp_base_new_window): send the content_store to yelp_window_new
	  instead.

	* src/Makefile.am (yelp_SOURCES): updated to reflect the current
	  files.

2001-12-09  Pablo Saratxaga  <pablo@mandrakesoft.com>

	* configure.in: Added "az" entry to ALL_LINGUAS.

2001-12-09  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-view-home.c: added, will be the Home-view.

	* src/yelp-doc-view.[ch]: moved to yelp-view-doc.[ch]
	
	* src/Makefile.am (yelp_SOURCES): use yelp-view* instead of
	  yelp-*-view.

2001-12-08  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-main.c (main): cast the window to YELP_WINDOW.

	* src/yelp-index.c: 
	- don't include yelp-keyword-db.h
	- cleaned up some comments.

	* src/yelp-base.c: 
	- don't include yelp-keyword-db.h
	- removed keyword_db from priv-struct.

	* src/yelp-keyword-db.[ch]: removed, should use only a GCompletion
	  plus the eventual support for ModelFilter in GtkTreeView.
	
	* src/Makefile.am (yelp_SOURCES): removed yelp-keyword-db.[ch].

	* TODO (FEATURES): updated.

	* src/yelp-util.c: removed the outcommented menu-code.
	- No menu will be used, only the toolbar. 
	- The window-generating code should probably be moved to glade
	  later.

	* src/yelp-util.[ch]: added, moved the insert-into-tree function
	  from yelp-section.[ch] here.

	* src/yelp-toc.c: 
	(yelp_toc_open): removed, unused and unimplemented. Can add it
	  back when I need it.

	* src/yelp-section.[ch]: 
	(yelp_section_add_sub): removed, functionality moved to
	  yelp-util.[ch]

	* src/yelp-scrollkeeper.[ch]: 
	- renamed from scrollkeeper-parser.[ch]
	- cleaned up, don't use the metadata-parser interface.
	- insert into the GtkTreeStore directly.

	* src/yelp-main.c: include yelp-window.h

	* src/yelp-base.c: 
	(yelp_base_new_book_cb): removed
	(yelp_base_insert_node): removed
	(yelp_base_section_foreach): removed
	(yelp_base_new): don't connect to parser signals, parser gets the
	  GtkTreeStore and can insert directly into it.

	* src/scrollkeeper-parser.[ch]: moved to yelp-scrollkeeper.[ch]

	* src/metadata.h: removed, was used to help including all the
	  metadata-parsers.

	* src/main.c: moved to yelp-main.c

	* src/metadata-parser.[ch]: removed, no need for this interface.

	* src/devhelp-parser.[ch]: removed, don't need to support this and
	  want the source to be as clean as possible.
	
	* src/Makefile.am (yelp_SOURCES): changed to build the correct
	  files after the move-around.

	* configure.in: changed AC_INIT argument to src/yelp-main.

	* autogen.sh (PKG_NAME): changed test for srcdir/main to
	  srcdir/yelp-main.

2001-12-07  Mikael Hallendal  <micke@codefactory.se>

	* src/Makefile.am (yelp_SOURCES): yelp-view -> yelp-doc-view.

	* src/yelp-window.c:
	- use yelp-doc-view instead of yelp-view.
	- update GUI after inspiration from M$ help.

	* src/yelp-doc-view.[ch]: renamed from yelp-view.[ch]

2001-12-05  Malcolm Tredinnick <malcolm@commsecure.com.au>
	* src/yelp-section.[ch]:
	- add a scheme member to YelpSection. Will usually be NULL,
	  except when adding URIs from Scrollkeeper.
	(yelp_section_new): pass in scheme as the last param.
	(yelp_section_copy): pass in extra param to yelp_section_new.

	* src/devhelp-parser.c, src/yelp-window.c: pass extra param in
	calls to yelp_section_new().

	* src/scrollkeeper-parser.c:
	- parse extra param to yelp_section_new().
	(sp_parse_doc): strip off the scheme from ScrollKeeper (usually
	"file:") before adding "ghelp:" to the URI. But save it in case
	we want act based on this scheme later.
	(sp_strip_scheme): new function to strip schemes.

	* docs/help-parsing.txt: New file, describing what we have to
	  handle. Mostly because I keep forgetting.

2001-12-04  Christian Meyer  <chrisime@gnome.org>

	* configure.in: Added "de" entry to ALL_LINGUAS.

2001-12-04  Malcolm Tredinnick <malcolm@commsecure.com.au>
	* src/yelp-window.c:
	remove obsolete include of ghelp-uri.h.
	(yelp_window_section_select_cb): There are YelpSections that
	don't have uris (section headings). Don't try to open them.

2001-12-04  Mikael Hallendal  <micke@codefactory.se>

	* src/ghelp-uri.[ch]: removed, old junk

	* src/ghelp-main.[c]: likewise

	* src/yelp-window.c:
	(yelp_window_populate): connect the history buttons.
	(yelp_window_history_button_pressed): added/impl.
	- use yelp_view_open_section instead.

	* src/yelp-view.c:
	(yelp_view_open_section): renamed from yelp_view_open_uri. Now
	  takes a section as argument instead.

	* src/yelp-section.c (yelp_section_new): allow name == NULL

	* src/yelp-window.c (yelp_window_populate): connect to the correct
	  button.
	(yelp_window_section_selected_cb): notify the history that we are
	  moving.
	
	* src/yelp-history.c (yelp_history_maybe_emit): no details when
	  emitting.

	* src/yelp-window.c: 
	- added forward/back-buttons to priv struct.
	- connect the buttons to forward/back-exists-toggled signals in
	  history.
	(yelp_window_toggle_history_buttons): added/impl. will handle when
	  forward/back signals are emitted from YelpHistory.

	* src/yelp-toc.h: YelpBook->GNode

	* src/yelp-section.[ch]: added to replace yelp-book.[ch]
	
	* src/yelp-history.[ch]: 
	- use YelpSections instead of strings.
	- renamed all functions to yelp_history instead of help_history.

	* src/yelp-book[ch]: removed, replaced with yelp-section.

	* src/yelp-base.c (yelp_base_new_book_cb): YelpBook->GNode

	* src/scrollkeeper-parser.c: 
	- lots of updates to stop using YelpBook.
	- YelpBook -> GNode
	- return GNode instead of YelpBook.
	- Use GNode insternaly instead of YelpBook.
	- now use yelp_section_add_sub instead of yelp_book_add_section.
	- also, yelp_section_new to get a new section to call
	  yelp_book_add_section with.
	
	* src/metadata.h: yelp-book.h -> yelp-section.h

	* src/metadata-parser.h: use a GNode in the new_book signal
	  instead of a YelpBook. I might remove this signal entirely and 
	  instead use a function that might return the root-node.

	* src/devhelp-parser.c: semi-updated, disabled for now

	* src/Makefile.am (yelp_SOURCES): 
	- don't compile devhelp-parser,
	- rename yelp-book to yelp-section

2001-12-02  Malcolm Tredinnick <malcolm@commsecure.com.au>
	* src/main.c (main): pass in GNOME_PROGRAM_STANDARD_PROPERTIES to
	  gnome_program_init().

	* src/Makefile.am: Add some defines for the install paths.

2001-12-01  Mikael Hallendal  <micke@codefactory.se>

	* src/scrollkeeper-parser.c:
	(sp_parse_toc_section): prepend ? to the anchor and chomp it.

	* src/yelp-view.c (yelp_view_open_uri): open the anchor if
  	  present.

	* src/yelp-window.c: removed comments left from the removal of
	  the uri-entry.
	
2001-12-01  Richard Hult  <rhult@codefactory.se>

	* src/main.c (main): Exit when the window is closed.

	* src/*.c: Mark strings as translatable.

	* src/main.c (main): Init gettext.

	* acconfig.h: Add.

	* configure.in: Gettextize and intltoolize.

	* autogen.sh: Redirect to the installed one for gnome 2.

	* yelp.desktop.in: Desktop file.

	* Makefile.am: Add a desktop file and intltool rule for it.

2001-12-01  Mikael Hallendal  <micke@codefactory.se>

	* src/scrollkeeper-parser.c: path uri's as strings instead of
	  GnomeVFSURI's

	* src/yelp-window.c: likewise

	* src/yelp-view.c: likewise

	* src/yelp-toc.c: likewise

	* src/yelp-index.c: likewise

	* src/yelp-book.c: likewise

	* src/yelp-base.c: likewise

	* TODO: updated.

	* src/yelp-window.c (yelp_window_populate): 
	- removed the uri-entry
	- added a toolbar

	* TODO: updated.

	* src/scrollkeeper-parser.c:
	(sp_parse_toc_section): chomp the name (otherwise it contains a
	newline).

2001-11-30  Mikael Hallendal  <micke@codefactory.se>

	* src/scrollkeeper-parser.c:
	Now handles TOC parsing, needs some fixing with the internal
	links.
	include yelp-book.h
	(sp_get_xml_tree_of_locale): removed
	(sp_parse_toc): renamed from sp_parse_doc_toc., implemented to now
	  parse the toc.
	(sp_parse_toc_section): added, impl.
	(sp_parse_section): renamed from sp_tree_parse_section.
	(sp_parse_doc): renamed from sp_tree_parse_doc
	(sp_parse_doc_toc): added (not impl. yet).
	(sp_get_xml_docpath): added. Handles retrieving the xml doc path
	 from a scrollkeeper-* output.
	(sp_get_xml_tree_of_locale): moved the
	 scrollkeeper-get-content-list stuff to sp_get_xml_docpath. Now use
	 it instead.

	* src/main.c (main): don't run gtk_init, using gnome-program.

	* src/scrollkeeper-parser.c: renamed internal functions to sp_ to
	  get the names shorter.

2001-11-27  Richard Hult  <rhult@codefactory.se>

	* src/scrollkeeper-parser.c: Include string.h to get rid of a
	warning.

	* src/*.h: Fix build by including glib-object.h instead of
	gobject/gobject.h everywhere. 

2001-11-16    <micke@codefactory.se>

        * vfs-help-module: removed, included in platform now.
	
	* configure.in: don't build vfs-help-module, it's now in libgnome.

	* Makefile.am (SUBDIRS): dito

	* src/yelp-view.c (yelp_view_url_requested_cb): GNOME_VFS_PRIORITY
	  fixed to work with resent changes in API.
	(yelp_view_open_uri): dito.

2001-10-29  Mikael Hallendal  <micke@codefactory.se>

	* src/main.c (main): if argument is passed, pass that argument to
	  yelp_window_open_uri.

	* src/yelp-window.c (yelp_window_open_uri): added/impl.

2001-10-28  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-window.c (yelp_window_uri_selected_cb): don't segfault
	if uri == NULL.
	
	* src/yelp-base.c (yelp_base_new): use the scrollkeeper parser
	instead of devhelp.

	* src/scrollkeeper-parser.c:
	(scrollkeeper_parser_parse): call _trim_ with doc->xmlRootNode.
	(scrollkeeper_parser_trim_empty_branches): now actually works.
	(scrollkeeper_parser_parse_book): don't call ..._tree_empty. All
	empty branches has been removed.
	(scrollkeeper_parser_tree_parse_section): dito.

	* src/yelp-book.c (yelp_book_section_new): accept uri == NULL and
	don't ref it, if it is.
	(yelp_book_add_section): accept uri == NULL.

	* src/scrollkeeper-parser.c: started work on building index from
	Scrollkeeper.

	* src/devhelp-parser.c (devhelp_parser_parse_book): use xmlChar
	instead of gchar.

	* vfs-help-module/help-method.c 
	(help_name_to_local_path): gnome_i18n_get_language_list returns
	const GList.

2001-10-27  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-view.c (yelp_view_open_uri): set the document to show
	  the beginning.

	* src/Makefile.am: 
	- Don't build ghelp-test.
	(yelp_SOURCES): don't include ghelp-uri.[ch].

